(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[0],{50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(5),s=a(2),c=a.n(s),o=a(17),r=a.n(o),i=(a(50),a(15)),l=a(86),u=a(85),p=(a(51),a(52),a(89)),d=a(22),m=d.a.initializeApp({apiKey:"AIzaSyD2jsZeQvZKU56od3mWCRBhV3gjDWPMUmU",authDomain:"instagram-clone-914b7.firebaseapp.com",projectId:"instagram-clone-914b7",storageBucket:"instagram-clone-914b7.appspot.com",messagingSenderId:"677068467644",appId:"1:677068467644:web:5224f5ab44d95d6ec60fb9",measurementId:"G-S2EKC99QXN"}).firestore(),j=d.a.auth(),b=d.a.storage();var g=function(e){var t=e.username,a=e.caption,c=e.imageUrl,o=e.postId,r=e.user,l=Object(s.useState)([]),u=Object(i.a)(l,2),j=u[0],b=u[1],g=Object(s.useState)(""),h=Object(i.a)(g,2),f=h[0],O=h[1];return Object(s.useEffect)((function(){var e;return o&&(e=m.collection("posts").doc(o).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){b(e.docs.map((function(e){return e.data()})))}))),function(){e()}}),[o]),console.log("The comments are",j),Object(n.jsxs)("div",{className:"post",children:[Object(n.jsxs)("div",{className:"post__header",children:[Object(n.jsx)(p.a,{src:"https://media-exp1.licdn.com/dms/image/C4E03AQE8WmqCwyrhkA/profile-displayphoto-shrink_100_100/0/1585927610891?e=1617235200&v=beta&t=p7tqz4eEuPFB7sKfHE3U1a3ToJIp7ZjJDxz_14fWM4E",className:"post__avatar",alt:"Raghavendra"}),Object(n.jsx)("h3",{children:t})]}),Object(n.jsx)("img",{className:"post__image",src:c,alt:"post"}),Object(n.jsxs)("h4",{className:"post__text",children:[Object(n.jsx)("strong",{children:t})," ",a]}),Object(n.jsx)("div",{className:"post__comments",children:j.map((function(e){return Object(n.jsxs)("p",{children:[Object(n.jsx)("strong",{children:e.username})," ",e.text]})}))}),r&&Object(n.jsxs)("form",{className:"post__commentBox",children:[Object(n.jsx)("input",{className:"post__input",type:"text",placeholder:"Add a comment...",value:f,onChange:function(e){return O(e.target.value)}}),Object(n.jsx)("button",{disabled:!f,className:"post__button",type:"submit",onClick:function(e){e.preventDefault(),m.collection("posts").doc(o).collection("comments").add({text:f,username:null===r||void 0===r?void 0:r.displayName,timestamp:d.a.firestore.FieldValue.serverTimestamp()}),O("")},children:"Post"})]})]})},h=a(88),f=a(87);a(60);var O=function(e){var t=e.username,a=Object(s.useState)(""),c=Object(i.a)(a,2),o=c[0],r=c[1],l=Object(s.useState)(null),u=Object(i.a)(l,2),p=u[0],j=u[1],g=Object(s.useState)(0),h=Object(i.a)(g,2),O=h[0],x=h[1];return Object(n.jsxs)("div",{className:"imageupload",children:[Object(n.jsx)("progress",{className:"imageupload__progress",value:O,max:"100"}),Object(n.jsx)("input",{type:"text",placeholder:"Enter a caption",onChange:function(e){return r(e.target.value)},value:o}),Object(n.jsx)("input",{type:"file",onChange:function(e){e.target.files[0]&&j(e.target.files[0])}}),Object(n.jsx)(f.a,{className:"imageupload__button",onClick:function(){b.ref("images/".concat(p.name)).put(p).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);x(t)}),(function(e){console.log(e),alert(e.message)}),(function(){b.ref("images").child(p.name).getDownloadURL().then((function(e){m.collection("posts").add({timestamp:d.a.firestore.FieldValue.serverTimestamp(),caption:o,imageUrl:e,username:t}),x(0),r(""),j(null)}))}))},children:"Upload"})]})};var x=function(){var e=Object(u.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}))(),t=Object(s.useState)([]),a=Object(i.a)(t,2),o=a[0],r=a[1],p=Object(s.useState)(!1),d=Object(i.a)(p,2),b=d[0],x=d[1],v=Object(s.useState)(""),_=Object(i.a)(v,2),y=_[0],N=_[1],C=Object(s.useState)(""),S=Object(i.a)(C,2),w=S[0],I=S[1],k=Object(s.useState)(""),E=Object(i.a)(k,2),U=E[0],A=E[1],B=Object(s.useState)(null),D=Object(i.a)(B,2),P=D[0],T=D[1],F=Object(s.useState)(!1),W=Object(i.a)(F,2),z=W[0],J=W[1],K=c.a.useState((function(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}})),L=Object(i.a)(K,1)[0];return console.log("The user is ",P),Object(s.useEffect)((function(){var e=j.onAuthStateChanged((function(e){e?(console.log(e),T(e)):(console.log("Setting the user null"),T(null))}));return function(){e()}}),[P,y]),Object(s.useEffect)((function(){m.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){r(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(l.a,{open:z,onClose:function(){J(!1)},children:Object(n.jsx)("div",{style:L,className:e.paper,children:Object(n.jsxs)("form",{className:"app__signup",children:[Object(n.jsx)("center",{children:Object(n.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""})}),Object(n.jsx)(h.a,{placeholder:"email",type:"text",value:U,onChange:function(e){return A(e.target.value)}}),Object(n.jsx)(h.a,{placeholder:"password",type:"password",value:w,onChange:function(e){return I(e.target.value)}}),Object(n.jsx)(f.a,{type:"submit",onClick:function(e){e.preventDefault(),j.signInWithEmailAndPassword(U,w).catch((function(e){return alert(e.message)})),J(!1)},children:"Sign In"})]})})}),Object(n.jsx)(l.a,{open:b,onClose:function(){x(!1)},children:Object(n.jsx)("div",{style:L,className:e.paper,children:Object(n.jsxs)("form",{className:"app__signup",children:[Object(n.jsx)("center",{children:Object(n.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""})}),Object(n.jsx)(h.a,{placeholder:"username",type:"text",value:y,onChange:function(e){N(e.target.value)}}),Object(n.jsx)(h.a,{placeholder:"email",type:"text",value:U,onChange:function(e){return A(e.target.value)}}),Object(n.jsx)(h.a,{placeholder:"password",type:"password",value:w,onChange:function(e){return I(e.target.value)}}),Object(n.jsx)(f.a,{type:"submit",onClick:function(e){e.preventDefault(),j.createUserWithEmailAndPassword(U,w).then((function(e){return e.user.updateProfile({displayName:y})})).catch((function(e){return alert(e.message)})),x(!1)},children:"Sign Up"})]})})}),Object(n.jsxs)("div",{className:"app__header",children:[Object(n.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"Instagram"}),P?Object(n.jsx)(f.a,{onClick:function(){return j.signOut()},children:"Logout"}):Object(n.jsxs)("div",{className:"app__loginContainer",children:[Object(n.jsx)(f.a,{onClick:function(){return J(!0)},children:"Sign In"}),Object(n.jsx)(f.a,{onClick:function(){return x(!0)},children:"Sign Up"})]})]}),Object(n.jsx)("div",{className:"app__posts",children:o.map((function(e){var t=e.id,a=e.post;return Object(n.jsx)(g,{postId:t,username:a.username,caption:a.caption,imageUrl:a.imageUrl,user:P},t)}))}),(null===P||void 0===P?void 0:P.displayName)?Object(n.jsx)(O,{username:P.displayName}):Object(n.jsx)("h3",{children:"You need to signup to upload"})]})},v=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,91)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),s(e),c(e),o(e)}))};r.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(x,{})}),document.getElementById("root")),v()}},[[61,1,2]]]);
//# sourceMappingURL=main.94edfd8f.chunk.js.map